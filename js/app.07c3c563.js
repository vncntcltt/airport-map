(function(t){function e(e){for(var o,s,a=e[0],c=e[1],l=e[2],d=0,u=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);p&&p(e);while(u.length)u.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],o=!0,a=1;a<r.length;a++){var c=r[a];0!==i[c]&&(o=!1)}o&&(n.splice(e--,1),t=s(s.s=r[0]))}return t}var o={},i={app:0},n=[];function s(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=o,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(r,o,function(e){return t[e]}.bind(null,o));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/airport-map/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var p=c;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"47ba":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var o=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.airports?r("div",{attrs:{id:"app"}},[r("main",{staticClass:"content"},[r("MapContainer",{ref:"mapContainer",attrs:{airports:t.airports},on:{"airport-selection-update":t.onAirportSelectionUpdate}}),r("SelectedAirports",{attrs:{selectedAirports:t.selectedAirports},on:{"unselect-airports":t.onAirportsUnselect,"unselect-airport":t.onAirportUnselect}})],1)]):t._e()},n=[],s=(r("a4d3"),r("e01a"),r("d28b"),r("4de4"),r("7db0"),r("d81d"),r("d3b7"),r("07ac"),r("3ca3"),r("ddb0"),r("5530")),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"airportMap",attrs:{id:"airportMap"}})},c=[],l=(r("c975"),r("a434"),r("99af"),r("4160"),r("b0c0"),r("159b"),r("e11e")),p=r.n(l),d=(r("2573"),r("9186"),r("6cc5"),r("8243"),r("3ac1"),p.a.Marker.extend({options:{toggledIconClassName:"toggled-marker",selected:!1},initialize:function(t,e){l["Util"].setOptions(this,e),this._latlng=Object(l["latLng"])(t),this.itemId=e.itemId||p.a.stamp(this),this._selected=e.selected},onAdd:function(t){p.a.Marker.prototype.onAdd.call(this,t),this.on("click",this.toggle,this),this._setIconClass()},onRemove:function(t){p.a.Marker.prototype.onRemove.call(this,t),this.off("click",this.toggle,this)},select:function(){this._selected=!0,this._setIconClass()},unselect:function(){this._selected=!1,this._setIconClass()},toggle:function(){this._selected?this.unselect():this.select(),this.fire("marker.toggled",{itemId:this.itemId,selected:this._selected})},_setIconClass:function(){this._icon&&(this._selected?l["DomUtil"].addClass(this._icon,this.options.toggledIconClassName):l["DomUtil"].removeClass(this._icon,this.options.toggledIconClassName))}}));delete l["Icon"].Default.prototype._getIconUrl,l["Icon"].Default.mergeOptions({iconRetinaUrl:r("584d"),iconUrl:r("6397"),shadowUrl:r("e2b9")});var u=l["Evented"].extend({add:function(t,e){this.map=p.a.map(t).setView([0,0],5),this.airportMarkers=[],p.a.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{minZoom:1,maxZoom:12,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'}).addTo(this.map),p.a.control.scale().addTo(this.map);var r=p.a.markerClusterGroup(),o=!0,i=!1,n=void 0;try{for(var s,a=e[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var c=s.value,l=new d([c.lat,c.lon],{title:"".concat(c.name," (").concat(c.code,")"),itemId:c.code,toggledIconClassName:"toggled-airport"});l.on("marker.toggled",this._onAirportToggled,this),this.airportMarkers.push(l),r.addLayer(l)}}catch(u){i=!0,n=u}finally{try{o||null==a.return||a.return()}finally{if(i)throw n}}this.map.addLayer(r),p.a.control.lasso({position:"topleft"}).addTo(this.map),this.map.on("lasso.finished",this._onLassoFinished,this)},remove:function(){this.map&&(this._removeAirportMarkersEvents(),this.map.off("lasso.finished",this._onLassoFinished,this),this.map.remove())},unselectAirports:function(){this.airportMarkers.forEach((function(t){t.unselect()}))},unselectAirport:function(t){var e=this.airportMarkers.find((function(e){return e.itemId===t}));e&&e.unselect()},_onLassoFinished:function(t){this.unselectAirports();var e=[],r=[];this._addSelectedMarkers(t.layers,r),r.forEach((function(t){t.select(),e.push(t.itemId)})),this.fire("airports.selected",{selectedAirportCodes:e})},_onAirportToggled:function(t){this.fire("airport.toggled",{airportCode:t.itemId})},_removeAirportMarkersEvents:function(){var t=this;this.airportMarkers.forEach((function(e){e.off("airport.toggled",t._onAirportToggled,t)}))},_addSelectedMarkers:function(t,e){var r=!0,o=!1,i=void 0;try{for(var n,s=t[Symbol.iterator]();!(r=(n=s.next()).done);r=!0){var a=n.value;a instanceof d?e.push(a):a instanceof p.a.MarkerCluster&&this._addSelectedMarkers(a.getAllChildMarkers(),e)}}catch(c){o=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}}),h={props:{airports:Array},data:function(){return{map:new u,selectedAirports:[]}},mounted:function(){var t=this;this.$nextTick().then((function(){var e=t.$refs.airportMap.getAttribute("id");t.map.add(e,t.airports),t.map.on("airports.selected",t.onAirportsSelected,t),t.map.on("airport.toggled",t.onAirportToggled,t)}))},beforeDestroy:function(){this.map.off("airports.selected",this.onAirportsSelected,this),this.map.off("airport.toggled",this.onAirportToggled,this),this.map.remove()},methods:{onAirportsSelected:function(t){var e=t.selectedAirportCodes;this.selectedAirports=e,this.$emit("airport-selection-update",this.selectedAirports)},onAirportToggled:function(t){var e=t.airportCode,r=this.selectedAirports.indexOf(e);r>-1?this.selectedAirports.splice(r,1):this.selectedAirports.push(e),this.$emit("airport-selection-update",this.selectedAirports)},unselectAirports:function(){this.map.unselectAirports(),this.selectedAirports=[],this.$emit("airport-selection-update",this.selectedAirports)},unselectAirport:function(t){this.map.unselectAirport(t);var e=this.selectedAirports.indexOf(t);e>-1&&this.selectedAirports.splice(e,1),this.$emit("airport-selection-update",this.selectedAirports)}}},f=h,m=(r("b7de"),r("2877")),v=Object(m["a"])(f,a,c,!1,null,null,null),g=v.exports,A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"selected-box"},[t.selectedAirports.length?r("div",[r("div",{staticClass:"selected-all"},[r("a",{staticClass:"removeAction",attrs:{title:"Unselect all"},on:{click:function(e){return t.$emit("unselect-airports")}}},[t._v("x")]),t._v(" Selected airports ("+t._s(t.selectedAirports.length)+") ")]),t._l(t.selectedAirports,(function(e){return r("div",{key:e.code,staticClass:"selected-item"},[r("a",{staticClass:"removeAction",attrs:{title:"Unselect"},on:{click:function(r){return t.$emit("unselect-airport",e.code)}}},[t._v("x")]),t._v(" "+t._s(e.name)+" ("+t._s(e.code)+") ")])}))],2):r("div",[t._v("Click on a marker or use the lasso tool to select airports.")])])},b=[],_={props:{selectedAirports:Array}},y=_,k=(r("d531"),Object(m["a"])(y,A,b,!1,null,"088748be",null)),C=k.exports,M={components:{MapContainer:g,SelectedAirports:C},data:function(){return{airports:null,selectedAirports:[]}},mounted:function(){var t=this;fetch("/airport-map/data/airports.json").then((function(t){return t.json()})).then((function(e){t.airports=t.processAirports(e)}))},methods:{processAirports:function(t){return Object.values(t).filter((function(t){return Boolean(t.iata)&&Boolean(t.icao)})).map((function(t){return Object(s["a"])({},t,{code:t.iata})}))},onAirportSelectionUpdate:function(t){var e=this,r=[],o=!0,i=!1,n=void 0;try{for(var s,a=function(){var t=s.value,o=e.airports.find((function(e){return e.code===t}));o&&r.push(o)},c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)a()}catch(l){i=!0,n=l}finally{try{o||null==c.return||c.return()}finally{if(i)throw n}}this.selectedAirports=r},onAirportsUnselect:function(){this.$refs.mapContainer.unselectAirports()},onAirportUnselect:function(t){this.$refs.mapContainer.unselectAirport(t)}}},w=M,O=(r("caa7"),Object(m["a"])(w,i,n,!1,null,"06db1c18",null)),x=O.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(x)}}).$mount("#app")},"8ae4":function(t,e,r){},b7de:function(t,e,r){"use strict";var o=r("47ba"),i=r.n(o);i.a},caa7:function(t,e,r){"use strict";var o=r("8ae4"),i=r.n(o);i.a},d531:function(t,e,r){"use strict";var o=r("e433"),i=r.n(o);i.a},e433:function(t,e,r){}});
//# sourceMappingURL=app.07c3c563.js.map